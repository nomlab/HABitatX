# 開発環境: docker compose up -d
# 本番環境: docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d

services:
   habitatx:
     build:
       context: .
       dockerfile: ${DOCKERFILE:-Dockerfile.dev}
       args:
         UID: ${UID:-1000}
         RAILS_ENV: ${RAILS_ENV:-development}
     container_name: habitatx
     ports:
       - "${PORT:-9000}:${PORT:-9000}"
     volumes:
       - ./storage:/home/habitatx/storage
       - ./log:/home/habitatx/log
       - ./tmp:/home/habitatx/tmp
     environment:
       - RAILS_ENV=${RAILS_ENV:-development}
       - PORT=${PORT:-9000}
       - OPENHAB_PATH=${OPENHAB_PATH}
       - OPENHAB_LINK=${OPENHAB_LINK}
     restart: unless-stopped
     stdin_open: true
     tty: true